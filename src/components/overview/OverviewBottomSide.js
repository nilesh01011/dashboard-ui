import React, { useEffect, useState } from 'react'
import { Doughnut } from "react-chartjs-2";
import BottomLoading from '../loadingOverview/BottomLoading';

function OverviewBottomSide({ theme }) {
    const [isLoading, setIsLoading] = useState(true);

    useEffect(() => {
        setTimeout(() => {
            setIsLoading(false)
        }, 1500)
    }, [])

    const data = {
        labels: ["10.50%"],
        datasets: [
            {
                data: [4761, 50000],
                backgroundColor: ["#7EAC55", "rgba(222, 222, 222, 1)"],
                borderColor: ["#aaa"],
                borderWidth: 0,
            }
        ]
    }

    const options = {
        plugins: {
            legend: {
                display: false
            }
        },
        cornerRadius: 20,
        maintainAspectRatio: true,
        circumference: 180,
        rotation: -90,
        cutoutPercentage: 64,
        cutout: "85%",
        responsive: true,
    }

    const textCenter = {
        id: 'textCenter',
        beforeDatasetDraw(chart, args, pluginOptions) {
            // eslint-disable-next-line no-unused-vars
            const { ctx, data } = chart;
            ctx.save();
            ctx.font = 'bolder 20px sans-serif';
            ctx.fillStyle = '#8E8585';
            ctx.textAlign = 'center';
            ctx.textBaseline = 'middle';
            ctx.fillText('10.50%', chart.getDatasetMeta(0).data[0].x, chart.getDatasetMeta(0).data[0].x);
        }
    }

    return (
        <>
            {
                isLoading ? (
                    <BottomLoading theme={theme} />
                ) : (
                    <div className='flex xl:flex-row flex-col justify-between gap-[20px] w-full h-auto'>
                        {/* bottom left sides */}
                        <div className='xl:w-[66%] rounded-lg shadow-[0_0_3px_rgba(0,0,0,0.2)]'>
                            {/* title */}
                            <div className={`w-full h-[46px] ${theme === 'dark' ? 'bg-[#635D5D]' : 'bg-[#F4F4F4]'} rounded-[0.5rem_0.5rem_0_0] p-[11px_18px]`}>
                                <h2 className={`${theme === 'dark' ? 'text-[#fff]' : 'text-[#635D5D]'}`}>Total Carbon in Business Travel</h2>
                            </div>
                            {/* content */}
                            <div className={`w-full flex sm:flex-row flex-col justify-between sm:h-[170px] h-auto sm:divide-x-[1px] divide-x-0 sm:divide-y-0 divide-y-[1px] ${theme === 'dark' ? 'bg-[#242424] divide-[#635D5D]' : 'bg-[#fff] divide-[#DEDEDE]'} rounded-[0_0_0.5rem_0.5rem]`}>
                                <div className='sm:w-[55%] md:pb-0 pb-4 p-[19px]'>
                                    {/* icons */}
                                    <div className='flex justify-between'>
                                        <div className='w-1/2 flex items-center gap-3'>
                                            <svg xmlns="http://www.w3.org/2000/svg" width="40" height="36" viewBox="0 0 40 41" fill="none">
                                                <path fillRule="evenodd" clipRule="evenodd" d="M19.9675 9.72967C13.8617 9.72967 8.91197 14.6794 8.91197 20.7852C8.91197 21.9658 9.09668 23.1014 9.43811 24.1658C9.59246 24.6469 9.32751 25.1622 8.84632 25.3165C8.36513 25.4709 7.84992 25.2059 7.69556 24.7247C7.4063 23.823 7.21377 22.8784 7.12988 21.9037C6.52563 22.5011 5.96542 23.1023 5.51448 23.677C5.11312 24.1886 4.82781 24.6426 4.66923 25.0239C4.50728 25.4133 4.51892 25.6249 4.54979 25.7226C4.56993 25.7863 4.64008 25.9422 5.02458 26.1086C5.42754 26.283 6.09021 26.4264 7.11926 26.4667C8.97384 26.5394 11.7999 26.2713 15.931 25.4969L13.9644 24.3139C13.5313 24.0535 13.3915 23.4913 13.6519 23.0582C13.9124 22.6252 14.4746 22.4853 14.9077 22.7458L18.2503 24.7565C18.8999 25.1472 19.1097 25.9905 18.719 26.6401L16.7083 29.9827C16.4478 30.4157 15.8856 30.5556 15.4525 30.2951C15.0195 30.0346 14.8796 29.4724 15.1401 29.0394L16.179 27.3123C12.0418 28.0842 9.08669 28.3752 7.04766 28.2953C5.91396 28.251 4.99593 28.0902 4.2977 27.788C3.58102 27.4778 3.02947 26.9847 2.80487 26.2741C2.591 25.5975 2.73485 24.9095 2.97951 24.3212C3.22755 23.7248 3.62324 23.1228 4.07475 22.5474C4.92622 21.4622 6.08109 20.341 7.16027 19.3565C7.8711 12.9124 13.3339 7.89966 19.9675 7.89966C23.1105 7.89966 25.991 9.02562 28.2269 10.8945C29.8334 10.4813 32.0642 10.1606 33.8906 10.476C34.8428 10.6405 35.8085 10.999 36.4805 11.7353C37.1889 12.5116 37.4406 13.5611 37.2268 14.805C37.1412 15.303 36.668 15.6373 36.17 15.5517C35.672 15.4661 35.3376 14.993 35.4232 14.495C35.5635 13.6785 35.376 13.2398 35.1287 12.9689C34.845 12.6581 34.3386 12.4105 33.5791 12.2793C32.4532 12.0849 31.0428 12.1923 29.7744 12.4265C29.8319 12.4939 29.8887 12.5618 29.9448 12.6304C30.2648 13.0215 30.2072 13.5979 29.8161 13.918C29.425 14.238 28.8485 14.1804 28.5285 13.7893C26.4996 11.3097 23.4184 9.72967 19.9675 9.72967ZM31.7586 23.0569C32.2462 23.1897 32.5337 23.6927 32.4009 24.1802C30.9109 29.6489 25.9101 33.6708 19.9675 33.6708C16.4832 33.6708 13.3203 32.2866 11.0018 30.0402C10.6389 29.6885 10.6298 29.1093 10.9814 28.7463C11.3331 28.3834 11.9123 28.3743 12.2753 28.7259C14.2662 30.6549 16.9774 31.8408 19.9675 31.8408C25.0637 31.8408 29.3567 28.3918 30.6353 23.6992C30.7681 23.2116 31.271 22.924 31.7586 23.0569ZM34.946 16.5111C33.83 15.2265 32.0387 14.7608 30.4383 15.3392L26.716 16.6844L21.5959 14.4528C20.2072 13.8476 19.006 15.6076 20.0757 16.6802L21.9301 18.5397L21.3184 18.8261L20.501 19.2407L17.83 19.1172C16.4061 19.0514 15.8381 20.9313 17.0602 21.665L20.435 23.6911C20.7372 23.8726 21.1062 23.9045 21.4351 23.7778L34.4603 18.7571C35.3483 18.4148 35.6269 17.2947 35.0027 16.5763L34.946 16.5111ZM31.0603 17.0603C31.7576 16.8083 32.5201 16.913 33.1157 17.3142L21.0897 21.9497L19.5561 21.029L20.5371 21.0743C20.774 21.0852 21.0097 21.0346 21.2212 20.9273L22.1206 20.4712L23.296 19.9207C24.1571 19.5175 24.3572 18.3819 23.6857 17.7086L23.0707 17.0919L26.1518 18.4348C26.4735 18.575 26.8367 18.5867 27.1667 18.4674L31.0603 17.0603Z" fill={`${theme === 'dark' ? '#fff' : '#8E8585'}`} />
                                            </svg>
                                            <span className={`${theme === 'dark' ? 'text-white' : 'text-[#342C2C]'}`}>FY20</span>
                                        </div>
                                        <div className='w-1/2 flex items-center gap-3'>
                                            <svg xmlns="http://www.w3.org/2000/svg" width="40" height="36" viewBox="0 0 40 41" fill="none">
                                                <path fillRule="evenodd" clipRule="evenodd" d="M19.9675 9.72967C13.8617 9.72967 8.91197 14.6794 8.91197 20.7852C8.91197 21.9658 9.09668 23.1014 9.43811 24.1658C9.59246 24.6469 9.32751 25.1622 8.84632 25.3165C8.36513 25.4709 7.84992 25.2059 7.69556 24.7247C7.4063 23.823 7.21377 22.8784 7.12988 21.9037C6.52563 22.5011 5.96542 23.1023 5.51448 23.677C5.11312 24.1886 4.82781 24.6426 4.66923 25.0239C4.50728 25.4133 4.51892 25.6249 4.54979 25.7226C4.56993 25.7863 4.64008 25.9422 5.02458 26.1086C5.42754 26.283 6.09021 26.4264 7.11926 26.4667C8.97384 26.5394 11.7999 26.2713 15.931 25.4969L13.9644 24.3139C13.5313 24.0535 13.3915 23.4913 13.6519 23.0582C13.9124 22.6252 14.4746 22.4853 14.9077 22.7458L18.2503 24.7565C18.8999 25.1472 19.1097 25.9905 18.719 26.6401L16.7083 29.9827C16.4478 30.4157 15.8856 30.5556 15.4525 30.2951C15.0195 30.0346 14.8796 29.4724 15.1401 29.0394L16.179 27.3123C12.0418 28.0842 9.08669 28.3752 7.04766 28.2953C5.91396 28.251 4.99593 28.0902 4.2977 27.788C3.58102 27.4778 3.02947 26.9847 2.80487 26.2741C2.591 25.5975 2.73485 24.9095 2.97951 24.3212C3.22755 23.7248 3.62324 23.1228 4.07475 22.5474C4.92622 21.4622 6.08109 20.341 7.16027 19.3565C7.8711 12.9124 13.3339 7.89966 19.9675 7.89966C23.1105 7.89966 25.991 9.02562 28.2269 10.8945C29.8334 10.4813 32.0642 10.1606 33.8906 10.476C34.8428 10.6405 35.8085 10.999 36.4805 11.7353C37.1889 12.5116 37.4406 13.5611 37.2268 14.805C37.1412 15.303 36.668 15.6373 36.17 15.5517C35.672 15.4661 35.3376 14.993 35.4232 14.495C35.5635 13.6785 35.376 13.2398 35.1287 12.9689C34.845 12.6581 34.3386 12.4105 33.5791 12.2793C32.4532 12.0849 31.0428 12.1923 29.7744 12.4265C29.8319 12.4939 29.8887 12.5618 29.9448 12.6304C30.2648 13.0215 30.2072 13.5979 29.8161 13.918C29.425 14.238 28.8485 14.1804 28.5285 13.7893C26.4996 11.3097 23.4184 9.72967 19.9675 9.72967ZM31.7586 23.0569C32.2462 23.1897 32.5337 23.6927 32.4009 24.1802C30.9109 29.6489 25.9101 33.6708 19.9675 33.6708C16.4832 33.6708 13.3203 32.2866 11.0018 30.0402C10.6389 29.6885 10.6298 29.1093 10.9814 28.7463C11.3331 28.3834 11.9123 28.3743 12.2753 28.7259C14.2662 30.6549 16.9774 31.8408 19.9675 31.8408C25.0637 31.8408 29.3567 28.3918 30.6353 23.6992C30.7681 23.2116 31.271 22.924 31.7586 23.0569ZM34.946 16.5111C33.83 15.2265 32.0387 14.7608 30.4383 15.3392L26.716 16.6844L21.5959 14.4528C20.2072 13.8476 19.006 15.6076 20.0757 16.6802L21.9301 18.5397L21.3184 18.8261L20.501 19.2407L17.83 19.1172C16.4061 19.0514 15.8381 20.9313 17.0602 21.665L20.435 23.6911C20.7372 23.8726 21.1062 23.9045 21.4351 23.7778L34.4603 18.7571C35.3483 18.4148 35.6269 17.2947 35.0027 16.5763L34.946 16.5111ZM31.0603 17.0603C31.7576 16.8083 32.5201 16.913 33.1157 17.3142L21.0897 21.9497L19.5561 21.029L20.5371 21.0743C20.774 21.0852 21.0097 21.0346 21.2212 20.9273L22.1206 20.4712L23.296 19.9207C24.1571 19.5175 24.3572 18.3819 23.6857 17.7086L23.0707 17.0919L26.1518 18.4348C26.4735 18.575 26.8367 18.5867 27.1667 18.4674L31.0603 17.0603Z" fill='#6BD12C' />
                                            </svg>
                                            <span className={`${theme === 'dark' ? 'text-white' : 'text-[#342C2C]'}`}>FY21</span>
                                        </div>
                                    </div>
                                    {/* content */}
                                    <div className='flex justify-between mt-[26px]'>
                                        <div className='w-4/12'>
                                            <h3 className={`text-2xl font-semibold ${theme === 'dark' ? 'text-white' : 'text-black'}`}>114,740</h3>
                                            <sup className={`text-[10px] ${theme === 'dark' ? 'text-white' : 'text-[#342C2C]'}`}>(kgCO2)</sup>
                                        </div>
                                        <div className='w-1/2 flex items-baseline gap-2'>
                                            <div>
                                                <h3 className={`text-2xl font-semibold ${theme === 'dark' ? 'text-white' : 'text-black'}`}>89,683</h3>
                                                <sup className={`text-[10px] ${theme === 'dark' ? 'text-white' : 'text-[#342C2C]'}`}>(kgCO2)</sup>
                                            </div>
                                            {/* percentage */}
                                            <div className='flex leading-4'>
                                                {/* icons */}
                                                <svg xmlns="http://www.w3.org/2000/svg" width="20" height="16" viewBox="0 0 20 20" fill="none">
                                                    <path d="M10 4.16658V15.8333" stroke="#6BD12C" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round" />
                                                    <path d="M4.1665 9.99992L9.99984 15.8333L15.8332 9.99992" stroke="#6BD12C" strokeWidth="1.5" strokeLinecap="round" strokeLinejoin="round" />
                                                </svg>
                                                {/* text */}
                                                <span className='text-[#6BD12C] text-[14px] font-bold'>8.33%</span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div className='sm:w-[45%] p-0 flex flex-col justify-center items-center relative sm:pt-0 pt-4'>
                                    <div className='w-full flex justify-center items-center sm:h-[160px] h-[180px] sm:-mt-[16px] -mt-[24px] gap-2'>
                                        {/* Doughnuts Charts */}
                                        <div className='xl:w-1/2 w-[170px] flex justify-center items-center h-max sm:-mt-0 -mt-[40px]'>
                                            <Doughnut
                                                data={data}
                                                options={options}
                                                plugins={[textCenter]}
                                            />
                                        </div>
                                    </div>
                                    {/* middle texts */}
                                    <div className='w-full flex items-center justify-center sm:-mt-[52px] -mt-[82px] sm:mb-0 mb-[18px]'>
                                        <div className='flex flex-col justify-center items-center'>
                                            <svg xmlns="http://www.w3.org/2000/svg" className='mb-[10px]' width="48" height="23" viewBox="0 0 48 23" fill="none">
                                                <path fillRule="evenodd" clipRule="evenodd" d="M6.10059 1.05862C6.92875 0.375357 7.97602 0 9.05894 0H23.1393C30.1413 0 35.4752 4.60608 37.6812 7.029H38.5616L38.6354 7.03632C42.47 7.4168 44.9553 8.13071 46.4043 9.53678C47.9416 11.0284 47.9893 12.9831 47.9893 14.636V15.393C47.9893 17.0319 46.6378 18.3735 44.9542 18.3735H42.1839C41.8504 20.9768 39.592 23 36.8418 23C34.0916 23 31.8331 20.9768 31.4997 18.3735H17.1228C16.7894 20.9768 14.5309 23 11.7807 23C9.02747 23 6.76708 20.9723 6.43751 18.3649C3.39404 18.2012 0.989258 15.7214 0.989258 12.7013V8.46738C0.989258 8.39333 0.994971 8.3206 1.00599 8.24957V8.09817C1.00599 7.46939 1.14017 6.69425 1.3698 5.99149C1.58344 5.3377 1.96766 4.46848 2.64903 3.90632L6.10059 1.05862ZM4.11825 7.029H11.5243V2.87676H9.05894C8.6703 2.87676 8.29297 3.01139 7.99322 3.25869L4.54183 6.10624M4.54183 6.10624C4.53392 6.11451 4.48225 6.16867 4.40717 6.30221C4.32504 6.44827 4.24177 6.64112 4.16755 6.86825C4.15005 6.92181 4.13362 6.9755 4.11825 7.029M14.4618 2.87676V7.029H21.6706V2.87676H14.4618ZM24.6081 2.9605C28.263 3.37613 31.3605 5.26773 33.4773 7.029H24.6081V2.9605ZM24.9969 9.90576L37.0059 9.90576L37.01 9.90576H38.4125C42.1687 10.285 43.6847 10.9475 44.3368 11.5803C44.905 12.1317 45.0518 12.8821 45.0518 14.636V15.393C45.0518 15.4576 45.0007 15.4968 44.9542 15.4968H41.7361C40.8855 13.6788 39.0176 12.4125 36.8418 12.4125C34.666 12.4125 32.798 13.6788 31.9475 15.4968H24.9969V9.90576ZM22.0594 15.4968V9.90576H3.92676V12.7013C3.92676 14.2524 5.20185 15.4968 6.75825 15.4968H6.88644C7.73696 13.6788 9.60495 12.4125 11.7807 12.4125C13.9565 12.4125 15.8245 13.6788 16.675 15.4968H22.0594ZM11.7807 15.2892C10.4366 15.2892 9.33368 16.3641 9.33368 17.7062C9.33368 19.0484 10.4366 20.1232 11.7807 20.1232C13.1248 20.1232 14.2278 19.0484 14.2278 17.7062C14.2278 16.3641 13.1248 15.2892 11.7807 15.2892ZM36.8418 15.2892C35.4977 15.2892 34.3947 16.3641 34.3947 17.7062C34.3947 19.0484 35.4977 20.1232 36.8418 20.1232C38.1859 20.1232 39.2888 19.0484 39.2888 17.7062C39.2888 16.3641 38.1859 15.2892 36.8418 15.2892Z" fill="#6BD12C" />
                                            </svg>
                                            <h3 className={`${theme === 'dark' ? 'text-white' : 'text-black'}`}>5000 Miles Green Travel</h3>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        {/* bottom right sides */}
                        <div className='xl:w-[32.2%] rounded-lg shadow-[0_0_3px_rgba(0,0,0,0.2)]'>
                            <div className={`w-full h-[46px] ${theme === 'dark' ? 'bg-[#635D5D]' : 'bg-[#F4F4F4]'} rounded-[0.5rem_0.5rem_0_0] p-[11px_20px]`}>
                                <h2 className={`${theme === 'dark' ? 'text-[#fff]' : 'text-[#635D5D]'}`}>Carbon Offsets</h2>
                            </div>
                            <div className={`w-full h-[170px] ${theme === 'dark' ? 'bg-[#242424]' : 'bg-[#fff]'} rounded-[0_0_0.5rem_0.5rem]`}>
                                <div className={`p-[20px] divide-y ${theme === 'dark' ? 'divide-[#635D5D]' : 'divide-[#DEDEDE]'}`}>
                                    <div className='flex justify-between items-center py-[20px]'>
                                        <h3 className={` ${theme === 'dark' ? 'text-white' : 'text-[#342C2C]'}`}>Carbon Credits</h3>
                                        <p className={`${theme === 'dark' ? 'text-white' : 'text-[#342C2C]'} text-base`}>
                                            550<span className='text-[12px]'> tCO <sub>2</sub></span>
                                        </p>
                                    </div>
                                    <div className='flex justify-between items-center py-[20px]'>
                                        <h3 className={`font-bold ${theme === 'dark' ? 'text-white' : 'text-[#342C2C]'}`}>Net Carbon</h3>
                                        <span className={`font-bold ${theme === 'dark' ? 'text-white' : 'text-[#342C2C]'}`}>2,13,226 CO <sub>2</sub></span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                )
            }
        </>
    )
}

export default OverviewBottomSide